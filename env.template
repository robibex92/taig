# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA&options

# Local development
# DATABASE_URL="postgresql://postgres:password@localhost:5432/taiginsky_dev?schema=public"

# Production (с оптимизацией)
DATABASE_URL="postgresql://username:password@host:port/database?schema=public&connection_limit=10&pool_timeout=20"

# Production example
# DATABASE_URL="postgresql://myuser:mypass@217.26.150.214:6543/mydatabase?schema=public&connection_limit=5&pool_timeout=10"

# ===========================================
# SERVER CONFIGURATION
# ===========================================
PORT=4000
NODE_ENV=development

# ===========================================
# CORS CONFIGURATION
# ===========================================
# Development
CORS_ORIGIN=http://localhost:5173

# Production (разделите несколько origins запятой)
# CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# ===========================================
# JWT CONFIGURATION
# ===========================================
# ВАЖНО: Используйте сильные случайные ключи в production!
# Генерация: openssl rand -base64 32

# Access Token (короткоживущий)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=15m

# Refresh Token (долгоживущий)
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_REFRESH_EXPIRES_IN=7d

# ===========================================
# TELEGRAM BOT CONFIGURATION (Optional)
# ===========================================
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-here

# ===========================================
# FRONTEND CONFIGURATION
# ===========================================
# URL of the frontend application for generating links in Telegram messages
FRONTEND_URL=https://taiginsky.md

# ===========================================
# LOGGING
# ===========================================
# Уровни: error, warn, info, debug
LOG_LEVEL=info

# ===========================================
# UPLOAD CONFIGURATION
# ===========================================
MAX_FILE_SIZE=10485760
UPLOAD_PATH=../Uploads

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# PRISMA OPTIMIZATION
# ===========================================
# Connection pool settings (автоматически из DATABASE_URL)
# connection_limit - максимальное количество соединений
# pool_timeout - таймаут ожидания соединения (секунды)
# connect_timeout - таймаут подключения к БД (секунды)

# Примеры настроек по размеру сервера:

# Малый сервер (1-2 GB RAM):
# DATABASE_URL="...?connection_limit=5&pool_timeout=10&connect_timeout=10"

# Средний сервер (4-8 GB RAM):
# DATABASE_URL="...?connection_limit=10&pool_timeout=20&connect_timeout=15"

# Большой сервер (16+ GB RAM):
# DATABASE_URL="...?connection_limit=20&pool_timeout=30&connect_timeout=20"

